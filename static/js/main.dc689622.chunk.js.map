{"version":3,"sources":["faceImages/blank_eyes.png","at_reaction.png","faceImages sync nonrecursive //.(png|jpe?g|svg)$","faceImages/blank_joy.png","faceImages/lasagna_face.png","faceImages/nice_blank_eyes.png","faceImages sync /^/.//.*/.json$","Renderer.js","Canvas.js","CanvasAtReaction.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","initBuffers","gl","positionBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","textureCoordBuffer","tintTextureCoordBuffer","DYNAMIC_DRAW","indexBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","position","textureCoord","tintTextureCoord","indices","getTextureShaderProgram","shaderProgram","vsSource","fsSource","vertexShader","loadShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","alert","getProgramInfoLog","initShaderProgram","program","attribLocations","vertexPosition","getAttribLocation","uniformLocations","projectionMatrix","getUniformLocation","modelViewMatrix","uSampler","loadTexture","url","texture","createTexture","bindTexture","TEXTURE_2D","internalFormat","RGBA","srcFormat","srcType","UNSIGNED_BYTE","pixel","Uint8Array","texImage2D","image","Image","onload","isPowerOf2","width","height","generateMipmap","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","crossOrigin","src","value","drawStart","clearColor","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","drawScene","programInfo","buffers","scale","translate","rotation","flip","mat4","glMatrix","create","rotateZ","type","FLOAT","vertexAttribPointer","enableVertexAttribArray","useProgram","uniformMatrix4fv","activeTexture","TEXTURE0","uniform1i","UNSIGNED_SHORT","drawElements","TRIANGLES","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","Canvas","state","document","querySelector","getContext","premultipliedAlpha","this","rafHandle","raf","renderGlScene","bind","renderer","bgTexture","props","backgroundImage","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","oldProps","eyeSrc","updateEyeTexture","updateBackgroundTexture","eyeTexture","programs","x","eyeXOffset","y","eyeYOffset","scaleX","eyeScaleFactor","scaleY","eyeSrcAspectRatio","mirrorXLeft","mirrorLeftEye","mirrorXRight","mirrorRightEye","rotationLeft","eyeRotation","rotationRight","Component","atReactionTexture","atReaction","aspectRatio","images","defaults","App","eyesSrc","blankEyes","atReactionSrc","atReactionAspectRatio","eyesSettings","blankEyesDefaults","imageSourceType","onImageSourceAvailable","newState","console","log","setState","builtinImageChosen","onSelectImage","target","files","length","reader","FileReader","addEventListener","result","readAsDataURL","onSelectBGFile","require","forEach","key","jsonFile","substring","lastIndexOf","push","classname","className","xOffset","yOffset","scaleFactor","Math","PI","style","listStyleType","onChange","onClick","maxHeight","padding","axis","xmin","xmax","p","checked","i","onPick","alignSelf","class","React","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.dc689622.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/blank_eyes.6585e257.png\";","module.exports = __webpack_public_path__ + \"static/media/at_reaction.4dac6faf.png\";","var map = {\n\t\"./blank_eyes.png\": 12,\n\t\"./blank_joy.png\": 67,\n\t\"./lasagna_face.png\": 68,\n\t\"./nice_blank_eyes.png\": 69\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 66;","module.exports = __webpack_public_path__ + \"static/media/blank_joy.d7309f23.png\";","module.exports = __webpack_public_path__ + \"static/media/lasagna_face.1b36eb6a.png\";","module.exports = __webpack_public_path__ + \"static/media/nice_blank_eyes.3c4c32b9.png\";","var map = {\n\t\"./blank_eyes.json\": 13,\n\t\"./blank_joy.json\": 71,\n\t\"./lasagna_face.json\": 72,\n\t\"./nice_blank_eyes.json\": 73\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 70;","import * as glMatrix from 'gl-matrix'\nimport { matcherHint } from 'jest-matcher-utils';\n\n//\n// initBuffers\n//\n// Initialize the buffers we'll need. For this demo, we just\n// have one object -- a simple two-dimensional square.\n//\nexport function initBuffers(gl) {\n\n  // Create a buffer for the square's positions.\n\n  const positionBuffer = gl.createBuffer();\n\n  // Select the positionBuffer as the one to apply buffer\n  // operations to from here out.\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n\n  // Now create an array of positions for the square.\n\n  const positions = [\n     1.0,  1.0,\n    -1.0,  1.0,\n    -1.0, -1.0,\n     1.0, -1.0,\n  ];\n\n  // Now pass the list of positions into WebGL to build the\n  // shape. We do this by creating a Float32Array from the\n  // JavaScript array, then use it to fill the current buffer.\n\n  gl.bufferData(gl.ARRAY_BUFFER,\n                new Float32Array(positions),\n                gl.STATIC_DRAW);\n\n  const textureCoordBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, textureCoordBuffer);\n\n  const textureCoordinates = [\n    // Front\n    1.0,  0.0,\n    0.0,  0.0,\n    0.0,  1.0,\n    1.0,  1.0,\n  ];\n\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoordinates),\n                gl.STATIC_DRAW);\n\n  const tintTextureCoordBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, tintTextureCoordBuffer);\n\n  const tintTextureCoordinates = [\n    // Front\n    1.0,  0.0,\n    0.0,  0.0,\n    0.0,  1.0,\n    1.0,  1.0,\n  ];\n\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(tintTextureCoordinates), gl.DYNAMIC_DRAW);\n\n  // Build the element array buffer; this specifies the indices\n  // into the vertex arrays for each face's vertices.\n\n  const indexBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n\n  const indices = [\n    0, 1, 2,    2, 3, 0,\n  ];\n\n  gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,\n    new Uint16Array(indices), gl.STATIC_DRAW);\n\n  return {\n    position: positionBuffer,\n    textureCoord: textureCoordBuffer,\n    tintTextureCoord: tintTextureCoordBuffer,\n    indices: indexBuffer,\n  };\n}\n\nexport function updateTextureCoordinates(gl, textureCoordBuffer, coordinates) {\n  gl.bindBuffer(gl.ARRAY_BUFFER, textureCoordBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(coordinates), gl.DYNAMIC_DRAW);\n}\n\nexport function getTextureShaderProgram(gl) {\n  // Vertex shader program\n      \n  const vsSource = `\n  attribute vec4 aVertexPosition;\n  attribute vec2 aTextureCoord;\n\n  uniform mat4 uModelViewMatrix;\n  uniform mat4 uProjectionMatrix;\n\n  varying highp vec2 vTextureCoord;\n\n  void main(void) {\n    gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n    vTextureCoord = aTextureCoord;\n  }\n  `;\n\n  // Fragment shader program\n\n  const fsSource = `\n    precision highp float;\n\n    varying highp vec2 vTextureCoord;\n\n    uniform sampler2D uSampler;\n\n    void main(void) {\n      gl_FragColor = texture2D(uSampler, vTextureCoord);\n      gl_FragColor.rgb *= gl_FragColor.a;\n    }\n  `;\n\n  // Initialize a shader program; this is where all the lighting\n  // for the vertices and so forth is established.\n  const shaderProgram = initShaderProgram(gl, vsSource, fsSource);\n\n  // Collect all the info needed to use the shader program.\n  // Look up which attribute our shader program is using\n  // for aVertexPosition and look up uniform locations.\n  return {\n    program: shaderProgram,\n    attribLocations: {\n      vertexPosition: gl.getAttribLocation(shaderProgram, 'aVertexPosition'),\n      textureCoord: gl.getAttribLocation(shaderProgram, 'aTextureCoord'),\n    },\n    uniformLocations: {\n      projectionMatrix: gl.getUniformLocation(shaderProgram, 'uProjectionMatrix'),\n      modelViewMatrix: gl.getUniformLocation(shaderProgram, 'uModelViewMatrix'),\n      uSampler: gl.getUniformLocation(shaderProgram, 'uSampler'),\n    },\n  };\n}\n\n//\n// Initialize a texture and load an image.\n// When the image finished loading copy it into the texture.\n//\nexport function loadTexture(gl, url) {\n  const texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n\n  // Because images have to be download over the internet\n  // they might take a moment until they are ready.\n  // Until then put a single pixel in the texture so we can\n  // use it immediately. When the image has finished downloading\n  // we'll update the texture with the contents of the image.\n  const level = 0;\n  const internalFormat = gl.RGBA;\n  const width = 1;\n  const height = 1;\n  const border = 0;\n  const srcFormat = gl.RGBA;\n  const srcType = gl.UNSIGNED_BYTE;\n  const pixel = new Uint8Array([0, 0, 255, 255]);  // opaque blue\n  gl.texImage2D(gl.TEXTURE_2D, level, internalFormat,\n                width, height, border, srcFormat, srcType,\n                pixel);\n\n  const image = new Image();\n  image.onload = function() {\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texImage2D(gl.TEXTURE_2D, level, internalFormat,\n                  srcFormat, srcType, image);\n\n    // WebGL1 has different requirements for power of 2 images\n    // vs non power of 2 images so check if the image is a\n    // power of 2 in both dimensions.\n    if (isPowerOf2(image.width) && isPowerOf2(image.height)) {\n       // Yes, it's a power of 2. Generate mips.\n       gl.generateMipmap(gl.TEXTURE_2D);\n    } else {\n       // No, it's not a power of 2. Turn off mips and set\n       // wrapping to clamp to edge\n       gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n       gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n       gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n       gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    }\n  };\n  image.crossOrigin = \"\";\n  image.src = url;\n\n  return texture;\n}\n\nfunction isPowerOf2(value) {\n  return (value & (value - 1)) == 0;\n}\n\nexport function drawStart(gl) {\n  gl.clearColor(0.0, 0.0, 0.0, 0.0);  // Clear to black, fully opaque\n  gl.clearDepth(1.0);                 // Clear everything\n  gl.enable(gl.DEPTH_TEST);           // Enable depth testing\n  gl.depthFunc(gl.LEQUAL);            // Near things obscure far things\n\n  // Clear the canvas before we start drawing on it.\n\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n}\n\nexport function drawScene(gl, programInfo, buffers, texture, scale, translate, rotation, flip) {\n  // Create a perspective matrix, a special matrix that is\n  // used to simulate the distortion of perspective in a camera.\n  // Our field of view is 45 degrees, with a width/height\n  // ratio that matches the display size of the canvas\n  // and we only want to see objects between 0.1 units\n  // and 100 units away from the camera.\n\n  var mat4 = glMatrix.mat4;\n\n  // const fieldOfView = 45 * Math.PI / 180;   // in radians\n  // const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n  // const zNear = 0.1;\n  // const zFar = 100.0;\n  const projectionMatrix = mat4.create();\n\n  // note: glmatrix.js always has the first argument\n  // as the destination to receive the result.\n  // mat4.perspective(projectionMatrix,\n  //                  fieldOfView,\n  //                  aspect,\n  //                  zNear,\n  //                  zFar);\n\n  // Set the drawing position to the \"identity\" point, which is\n  // the center of the scene.\n  const modelViewMatrix = mat4.create();\n\n  // Now move the drawing position a bit to where we want to\n  // start drawing the square.\n\n  \n\n  mat4.translate(modelViewMatrix, modelViewMatrix, translate); \n\n  mat4.scale(modelViewMatrix, modelViewMatrix, flip);\n\n  mat4.rotateZ(modelViewMatrix, modelViewMatrix, rotation);\n\n  mat4.scale(modelViewMatrix, modelViewMatrix, scale);\n\n\n  // Tell WebGL how to pull out the positions from the position\n  // buffer into the vertexPosition attribute.\n  {\n    const numComponents = 2;\n    const type = gl.FLOAT;\n    const normalize = false;\n    const stride = 0;\n    const offset = 0;\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffers.position);\n    gl.vertexAttribPointer(\n        programInfo.attribLocations.vertexPosition,\n        numComponents,\n        type,\n        normalize,\n        stride,\n        offset);\n    gl.enableVertexAttribArray(\n        programInfo.attribLocations.vertexPosition);\n  }\n\n  // Tell WebGL how to pull out the texture coordinates from\n  // the texture coordinate buffer into the textureCoord attribute.\n  {\n    const numComponents = 2;\n    const type = gl.FLOAT;\n    const normalize = false;\n    const stride = 0;\n    const offset = 0;\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffers.textureCoord);\n    gl.vertexAttribPointer(\n        programInfo.attribLocations.textureCoord,\n        numComponents,\n        type,\n        normalize,\n        stride,\n        offset);\n    gl.enableVertexAttribArray(\n        programInfo.attribLocations.textureCoord);\n  }\n\n  // Tell WebGL which indices to use to index the vertices\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffers.indices);\n\n  // Tell WebGL to use our program when drawing\n\n  gl.useProgram(programInfo.program);\n\n  // Set the shader uniforms\n\n  gl.uniformMatrix4fv(programInfo.uniformLocations.projectionMatrix, false, projectionMatrix);\n  gl.uniformMatrix4fv(programInfo.uniformLocations.modelViewMatrix, false, modelViewMatrix);\n\n  gl.activeTexture(gl.TEXTURE0);\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.uniform1i(programInfo.uniformLocations.uSampler, 0);\n\n  {\n    const offset = 0;\n    const vertexCount = 6;\n    const type = gl.UNSIGNED_SHORT;\n    gl.drawElements(gl.TRIANGLES, vertexCount, type, offset);\n  }\n}\n\n//\n// Initialize a shader program, so WebGL knows how to draw our data\n//\nexport function initShaderProgram(gl, vsSource, fsSource) {\n  const vertexShader = loadShader(gl, gl.VERTEX_SHADER, vsSource);\n  const fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fsSource);\n\n  // Create the shader program\n\n  const shaderProgram = gl.createProgram();\n  gl.attachShader(shaderProgram, vertexShader);\n  gl.attachShader(shaderProgram, fragmentShader);\n  gl.linkProgram(shaderProgram);\n\n  // If creating the shader program failed, alert\n\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n    alert('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));\n    return null;\n  }\n\n  return shaderProgram;\n}\n\n//\n// creates a shader of the given type, uploads the source and\n// compiles it.\n//\nexport function loadShader(gl, type, source) {\n  const shader = gl.createShader(type);\n\n  // Send the source to the shader object\n\n  gl.shaderSource(shader, source);\n\n  // Compile the shader program\n\n  gl.compileShader(shader);\n\n  // See if it compiled successfully\n\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    alert('An error occurred compiling the shaders: ' + gl.getShaderInfoLog(shader));\n    gl.deleteShader(shader);\n    return null;\n  }\n\n  return shader;\n}\n","import React, { Component } from 'react';\nimport raf from 'raf';\nimport * as renderer from './Renderer'\n \nexport default class Canvas extends Component {\n\n  state = {\n  }\n \n  componentDidMount() {\n      const canvas = document.querySelector('#glcanvas');\n      const gl = canvas.getContext('webgl', {premultipliedAlpha: false});\n\n        // If we don't have a GL context, give up now\n        if (!gl) {\n          alert('Unable to initialize WebGL. Your browser or machine may not support it.');\n          return;\n        }\n\n        this.rafHandle = raf(this.renderGlScene.bind(this, gl));\n\n        this.programInfo = renderer.getTextureShaderProgram(gl);\n      \n        // Here's where we call the routine that builds all the\n        // objects we'll be drawing.\n        this.buffers = renderer.initBuffers(gl);\n      \n        this.bgTexture = renderer.loadTexture(gl, this.props.backgroundImage)\n      \n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n    }\n\n    componentDidUpdate(oldProps) {\n      if (oldProps.eyeSrc != this.props.eyeSrc) {\n        this.updateEyeTexture();\n      }\n\n      if (oldProps.backgroundImage != this.props.backgroundImage) {\n        this.updateBackgroundTexture();\n      }\n    }\n\n    updateBackgroundTexture() {\n      const canvas = document.querySelector('#glcanvas');\n      const gl = canvas.getContext('webgl');\n\n      this.bgTexture = renderer.loadTexture(gl, this.props.backgroundImage)\n    }\n\n    updateEyeTexture() {\n      var eyeSrc = this.props.eyeSrc;\n      if (eyeSrc != null) {\n        const canvas = document.querySelector('#glcanvas');\n        const gl = canvas.getContext('webgl');\n\n        this.eyeTexture = renderer.loadTexture(gl, eyeSrc, gl.LINEAR);\n      } else {\n        this.eyeTexture = null;\n      }\n    }\n \n    renderGlScene(gl, programs) {\n      renderer.drawStart(gl);\n      renderer.drawScene(gl, this.programInfo, this.buffers, this.bgTexture, [1.0, 1.0, 1.0], [0, 0, 0], 0, [1.0, 1.0, 1.0]);\n\n      if (this.eyeTexture) {\n        var x = this.props.eyeXOffset;\n        var y = this.props.eyeYOffset;\n\n        var scaleX = this.props.eyeScaleFactor;\n        var scaleY = this.props.eyeScaleFactor;\n        if (this.props.eyeSrcAspectRatio < 1) {\n          scaleX = scaleX * this.props.eyeSrcAspectRatio;\n        } else if (this.props.eyeSrcAspectRatio > 1) {\n          scaleY = scaleY * 1/this.props.eyeSrcAspectRatio;\n        }\n\n        var mirrorXLeft = this.props.mirrorLeftEye ? -1.0 : 1.0;\n        var mirrorXRight = this.props.mirrorRightEye ? -1.0 : 1.0;\n\n        var rotationLeft = this.props.mirrorLeftEye ? this.props.eyeRotation : -this.props.eyeRotation;\n        var rotationRight = this.props.mirrorRightEye ? -this.props.eyeRotation : this.props.eyeRotation;\n\n        renderer.drawScene(gl, this.programInfo, this.buffers, this.eyeTexture, [scaleX, scaleY, 1.0], [-x, y, 0], rotationLeft, [mirrorXLeft, 1.0, 1.0]);\n        renderer.drawScene(gl, this.programInfo, this.buffers, this.eyeTexture, [scaleX, scaleY, 1.0], [x, y, 0], rotationRight, [mirrorXRight, 1.0, 1.0]);\n      }\n\n      this.rafHandle = raf(this.renderGlScene.bind(this, gl, programs));\n  }\n \n    render() {\n        return (\n          <canvas id=\"glcanvas\" width=\"160\" height=\"160\"/>\n        );\n    }\n}","import React, { Component } from 'react';\nimport raf from 'raf';\nimport * as renderer from './Renderer'\n\nimport atReaction from './at_reaction.png'\n \nexport default class Canvas extends Component {\n\n  state = {\n  }\n \n  componentDidMount() {\n      const canvas = document.querySelector('#glcanvas-atreaction');\n      const gl = canvas.getContext('webgl', {premultipliedAlpha: false});\n\n        // If we don't have a GL context, give up now\n        if (!gl) {\n          alert('Unable to initialize WebGL. Your browser or machine may not support it.');\n          return;\n        }\n\n        this.rafHandle = raf(this.renderGlScene.bind(this, gl));\n\n        this.programInfo = renderer.getTextureShaderProgram(gl);\n      \n        // Here's where we call the routine that builds all the\n        // objects we'll be drawing.\n        this.buffers = renderer.initBuffers(gl);\n      \n        //this.bgTexture = renderer.loadTexture(gl, this.props.backgroundImage)\n        this.atReactionTexture = renderer.loadTexture(gl, atReaction);\n      \n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n    }\n\n    componentDidUpdate(oldProps) {\n      if (oldProps.eyeSrc != this.props.eyeSrc) {\n        this.updateEyeTexture();\n      }\n\n      if (oldProps.backgroundImage != this.props.backgroundImage) {\n        this.updateBackgroundTexture();\n      }\n    }\n\n    updateBackgroundTexture() {\n      const canvas = document.querySelector('#glcanvas-atreaction');\n      const gl = canvas.getContext('webgl');\n\n      this.bgTexture = renderer.loadTexture(gl, this.props.backgroundImage)\n    }\n\n    updateEyeTexture() {\n      var eyeSrc = this.props.eyeSrc;\n      if (eyeSrc != null) {\n        const canvas = document.querySelector('#glcanvas-atreaction');\n        const gl = canvas.getContext('webgl');\n\n        this.eyeTexture = renderer.loadTexture(gl, eyeSrc, gl.LINEAR);\n      } else {\n        this.eyeTexture = null;\n      }\n    }\n \n    renderGlScene(gl, programs) {\n      renderer.drawStart(gl);\n\n      if (this.bgTexture != null) {\n        var scaleX = 1.0;\n        var scaleY = 1.0;\n        if (this.props.aspectRatio < 1) {\n          scaleX = scaleX * this.props.aspectRatio;\n        } else if (this.props.aspectRatio > 1) {\n          scaleY = scaleY * 1/this.props.aspectRatio;\n        }\n\n        renderer.drawScene(gl, this.programInfo, this.buffers, this.bgTexture, [scaleX, scaleY, 1.0], [0, 0, 0], 0, [1.0, 1.0, 1.0]);\n      }\n\n      renderer.drawScene(gl, this.programInfo, this.buffers, this.atReactionTexture, [.5, .5, 1.0], [-.5, -.6, 0], 0, [1.0, 1.0, 1.0]);\n\n      this.rafHandle = raf(this.renderGlScene.bind(this, gl, programs));\n  }\n \n    render() {\n        return (\n          <canvas id=\"glcanvas-atreaction\" width=\"160\" height=\"160\"/>\n        );\n    }\n}","import React from 'react';\nimport './App.css';\nimport Canvas from './Canvas';\nimport CanvasAtReaction from './CanvasAtReaction'\nimport Slider from 'react-input-slider';\nimport ImagePicker from 'react-image-picker'\nimport 'react-image-picker/dist/index.css'\n\nimport blankEyes from './faceImages/blank_eyes.png'\nimport blankEyesDefaults from './faceImages/blank_eyes.json'\n\nvar images = [];\nvar defaults = [];\n\nexport default class App extends React.Component {\n  state = {\n    eyesSrc: null,\n    backgroundImage:blankEyes,\n    aspectRatio:1,\n    atReactionSrc:null,\n    atReactionAspectRatio:1,\n    eyesSettings: blankEyesDefaults,\n    imageSourceType:\"file\"\n  }\n\n  componentWillMount() {\n    var req = require.context('./faceImages/', false, /\\.(png|jpe?g|svg)$/);\n    var keys = req.keys(); // keys contains the file names eg \"./blank_eyes.png\"\n    images = keys.map(req);\n\n    keys.forEach(function(key) {\n      try {\n        var jsonFile = require('./faceImages/' + key.substring(2, key.lastIndexOf('.')) + '.json');\n        defaults.push(jsonFile);\n      } catch(e) {\n        defaults.push({});\n      }\n    });\n  }\n\n  onImageSourceAvailable = (src, type) => {\n    var image = new Image();\n\n    image.crossOrigin = \"\";\n    image.src = src;\n\n    image.onload = () => {\n      var newState = type === \"eyesSrc\" ? {aspectRatio: image.width / image.height} : {atReactionAspectRatio: image.width / image.height};\n      newState[type] = src;\n      console.log(type)\n      this.setState(newState)\n    };\n  } \n\n  builtinImageChosen = (image) => {\n    this.setState(state => ({backgroundImage:image.src, eyesSettings:{...state.eyesSettings, ...defaults[image.value]}}));\n  }\n\n  onSelectImage = (type, e) => {\n    if (this.state.imageSourceType == \"file\") {\n      if (e.target.files && e.target.files.length > 0) {\n        const reader = new FileReader()\n        reader.addEventListener(\n          'load',\n          () =>\n          {\n            this.onImageSourceAvailable(reader.result, type);\n          },\n          false\n        )\n        reader.readAsDataURL(e.target.files[0])\n      }\n    }\n    else {\n      this.onImageSourceAvailable(\"https://cors-anywhere.herokuapp.com/\" + e.target.value, type);\n    }\n  }\n\n  onSelectBGFile = e => {\n    if (e.target.files && e.target.files.length > 0) {\n      const reader = new FileReader()\n      reader.addEventListener(\n        'load',\n        () =>\n        {\n          var image = new Image();\n\n          image.src = reader.result;\n\n          image.onload = () => {\n              this.setState({\n                backgroundImage: reader.result,\n              })\n          };\n        },\n        false\n      )\n      reader.readAsDataURL(e.target.files[0])\n    }\n  }\n\n  render() {\n    return (\n      <div classname=\"Top\">\n        <div className=\"App\">\n          <div>Emoji Workflow<br/>\n            <Canvas\n              backgroundImage={this.state.backgroundImage}\n              eyeSrc={this.state.eyesSrc}\n              eyeSrcAspectRatio={this.state.aspectRatio}\n              eyeXOffset={this.state.eyesSettings.xOffset / 100}\n              eyeYOffset={this.state.eyesSettings.yOffset / 100}\n              eyeScaleFactor={this.state.eyesSettings.scaleFactor / 100}\n              eyeRotation={this.state.eyesSettings.rotation * Math.PI / 180}\n              mirrorRightEye={this.state.eyesSettings.mirrorRightEye}\n              mirrorLeftEye={this.state.eyesSettings.mirrorLeftEye}\n            />\n          </div>\n          <div style={{}}>\n              <ul style={{listStyleType: \"none\"}}>\n                <li><input type={this.state.imageSourceType} onChange={this.onSelectImage.bind(this, \"eyesSrc\")}/></li>\n                <div>\n                  <button onClick={() => { this.setState({imageSourceType: \"file\"}) }}>File</button>\n                  &nbsp;\n                  <button onClick={() => { this.setState({imageSourceType: \"url\"}) }}>Url</button>\n                </div>\n              </ul>\n            <div>\n              <img src={this.state.eyesSrc} style={{maxHeight:100}}/>\n            </div>\n          </div>\n          \n          <div style={{padding: \"50px\"}}>\n              X Offset: {this.state.eyesSettings.xOffset}%<br/>\n              <Slider axis=\"x\" x={this.state.eyesSettings.xOffset} xmin={0} xmax={100} onChange={({x}) => this.setState(p => ({eyesSettings: {...p.eyesSettings, xOffset:x}}))}/><br/>\n              Y Offset: {this.state.eyesSettings.yOffset}%<br/>\n              <Slider axis=\"x\" x={this.state.eyesSettings.yOffset} xmin={-100} xmax={100} onChange={({x}) => this.setState(p => ({eyesSettings: {...p.eyesSettings, yOffset:x}}))}/><br/>\n              Scale Factor: {this.state.eyesSettings.scaleFactor}%<br/>\n              <Slider axis=\"x\" x={this.state.eyesSettings.scaleFactor} xmin={0} xmax={100} onChange={({x}) => this.setState(p => ({eyesSettings: {...p.eyesSettings, scaleFactor:x}}))}/><br/>\n              Rotation:  {this.state.eyesSettings.rotation}&deg;<br/>\n              <Slider axis=\"x\" x={this.state.eyesSettings.rotation} xmin={-45} xmax={45} onChange={({x}) => this.setState(p => ({eyesSettings: {...p.eyesSettings, rotation:x}}))}/><br/>\n              Mirror Right Eye: <input type=\"checkbox\" onChange={(e) => { var target = e.target; this.setState(p => ({eyesSettings: {...p.eyesSettings, mirrorRightEye:target.checked}}))}}/><br/>\n              Mirror Left Eye: <input type=\"checkbox\" onChange={(e) => { var target = e.target; this.setState((p) => ({eyesSettings: {...p.eyesSettings, mirrorLeftEye:target.checked}}))}}/><br/>\n          </div>\n        </div>\n        <div>\n          Choose a background image:<br/>\n          <ImagePicker\n            images={images.map((image, i) => ({src: image, value: i}))}\n            onPick={this.builtinImageChosen}/>\n        </div>\n        <div>\n          Or choose a custom image:\n          <input type=\"file\" onChange={this.onSelectBGFile} style={{alignSelf:'top'}}/>\n        </div>\n        <div class=\"App\">\n            <div>At Reaction Workflow<br/>\n              <CanvasAtReaction\n                backgroundImage={this.state.atReactionSrc}\n                aspectRatio={this.state.atReactionAspectRatio}\n              />\n            </div>\n            <input type={this.state.imageSourceType} onChange={this.onSelectImage.bind(this, \"atReactionSrc\")} style={{alignSelf:'top'}}/>\n        </div>\n      </div>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}