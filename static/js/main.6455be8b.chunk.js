(this["webpackJsonpemoji-workflow"]=this["webpackJsonpemoji-workflow"]||[]).push([[0],{11:function(e,t,r){e.exports=r.p+"static/media/nice_blank_eyes.3c4c32b9.png"},12:function(e){e.exports=JSON.parse('{"imageTitle":"Eyes Image","xOffset":40,"yOffset":18,"scaleFactor":40,"rotation":9,"mirrorRight":false,"mirrorLeft":false,"twoEyes":true,"behindTemplate":false}')},37:function(e,t,r){e.exports=r(75)},42:function(e,t,r){},43:function(e,t,r){},65:function(e,t,r){var a={"./at_reaction.png":66,"./blank_eyes.png":67,"./blank_joy.png":68,"./lasagna_face.png":69,"./nice_blank_eyes.png":11};function n(e){var t=i(e);return r(t)}function i(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id=65},66:function(e,t,r){e.exports=r.p+"static/media/at_reaction.d0f245c6.png"},67:function(e,t,r){e.exports=r.p+"static/media/blank_eyes.6585e257.png"},68:function(e,t,r){e.exports=r.p+"static/media/blank_joy.d7309f23.png"},69:function(e,t,r){e.exports=r.p+"static/media/lasagna_face.1b36eb6a.png"},70:function(e,t,r){var a={"./at_reaction.json":71,"./blank_eyes.json":72,"./blank_joy.json":73,"./lasagna_face.json":74,"./nice_blank_eyes.json":12};function n(e){var t=i(e);return r(t)}function i(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id=70},71:function(e){e.exports=JSON.parse('{"imageTitle":"Background Image","xOffset":0,"yOffset":0,"scaleFactor":100,"rotation":0,"mirrorRight":false,"mirrorLeft":false,"twoEyes":false,"behindTemplate":true}')},72:function(e){e.exports=JSON.parse('{"imageTitle":"Eyes Image","xOffset":40,"yOffset":18,"scaleFactor":40,"rotation":9,"mirrorRight":false,"mirrorLeft":false,"twoEyes":true,"behindTemplate":false}')},73:function(e){e.exports=JSON.parse('{"imageTitle":"Tears Image","xOffset":74,"yOffset":-36,"scaleFactor":35,"rotation":-45,"mirrorRight":true,"mirrorLeft":false,"twoEyes":true,"behindTemplate":false}')},74:function(e){e.exports=JSON.parse('{"imageTitle":"Eyes Image","xOffset":46,"yOffset":49,"scaleFactor":32,"rotation":0,"mirrorRight":false,"mirrorLeft":false,"twoEyes":true,"behindTemplate":false}')},75:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),i=r(23),o=r.n(i),s=(r(42),r(24)),c=r(6),l=r(7),u=r(9),f=r(8),m=r(10),g=(r(43),r(13)),p=r.n(g),h=r(28);r(45);function d(e){var t=function(e,t,r){var a=x(e,e.VERTEX_SHADER,t),n=x(e,e.FRAGMENT_SHADER,r),i=e.createProgram();if(e.attachShader(i,a),e.attachShader(i,n),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))return alert("Unable to initialize the shader program: "+e.getProgramInfoLog(i)),null;return i}(e,"\n  attribute vec4 aVertexPosition;\n  attribute vec2 aTextureCoord;\n\n  uniform mat4 uModelViewMatrix;\n  uniform mat4 uProjectionMatrix;\n\n  varying highp vec2 vTextureCoord;\n\n  void main(void) {\n    gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n    vTextureCoord = aTextureCoord;\n  }\n  ","\n    precision highp float;\n\n    varying highp vec2 vTextureCoord;\n\n    uniform sampler2D uSampler;\n\n    void main(void) {\n      gl_FragColor = texture2D(uSampler, vTextureCoord);\n      gl_FragColor.rgb *= gl_FragColor.a;\n    }\n  ");return{program:t,attribLocations:{vertexPosition:e.getAttribLocation(t,"aVertexPosition"),textureCoord:e.getAttribLocation(t,"aTextureCoord")},uniformLocations:{projectionMatrix:e.getUniformLocation(t,"uProjectionMatrix"),modelViewMatrix:e.getUniformLocation(t,"uModelViewMatrix"),uSampler:e.getUniformLocation(t,"uSampler")}}}function E(e,t){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=e.RGBA,n=e.RGBA,i=e.UNSIGNED_BYTE,o=new Uint8Array([0,0,255,255]);e.texImage2D(e.TEXTURE_2D,0,a,1,1,0,n,i,o);var s=new Image;return s.onload=function(){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,a,n,i,s),y(s.width)&&y(s.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR))},s.crossOrigin="",s.src=t,r}function y(e){return 0==(e&e-1)}function b(e,t,r,a,n,i,o,s){var c=h.a,l=c.create(),u=c.create();c.translate(u,u,i),c.scale(u,u,s),c.rotateZ(u,u,o),c.scale(u,u,n);var f=e.FLOAT;e.bindBuffer(e.ARRAY_BUFFER,r.position),e.vertexAttribPointer(t.attribLocations.vertexPosition,2,f,!1,0,0),e.enableVertexAttribArray(t.attribLocations.vertexPosition);var m=e.FLOAT;e.bindBuffer(e.ARRAY_BUFFER,r.textureCoord),e.vertexAttribPointer(t.attribLocations.textureCoord,2,m,!1,0,0),e.enableVertexAttribArray(t.attribLocations.textureCoord),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indices),e.useProgram(t.program),e.uniformMatrix4fv(t.uniformLocations.projectionMatrix,!1,l),e.uniformMatrix4fv(t.uniformLocations.modelViewMatrix,!1,u),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a),e.uniform1i(t.uniformLocations.uSampler,0);var g=e.UNSIGNED_SHORT;e.drawElements(e.TRIANGLES,6,g,0)}function x(e,t,r){var a=e.createShader(t);return e.shaderSource(a,r),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS)?a:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(a)),e.deleteShader(a),null)}var T=function(e){function t(){var e,r;Object(c.a)(this,t);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(r=Object(u.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={},r}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector("#glcanvas").getContext("webgl",{premultipliedAlpha:!1});e?(this.rafHandle=p()(this.renderGlScene.bind(this,e)),this.programInfo=d(e),this.buffers=function(e){var t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,1,-1]),e.STATIC_DRAW);var r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,0,1,1,1]),e.STATIC_DRAW);var a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,0,1,1,1]),e.DYNAMIC_DRAW);var n=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,2,3,0]),e.STATIC_DRAW),{position:t,textureCoord:r,tintTextureCoord:a,indices:n}}(e),this.bgTexture=E(e,this.props.backgroundImage),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)):alert("Unable to initialize WebGL. Your browser or machine may not support it.")}},{key:"componentDidUpdate",value:function(e){e.src!=this.props.src&&this.updateSrcTexture(),e.backgroundImage!=this.props.backgroundImage&&this.updateBackgroundTexture()}},{key:"updateBackgroundTexture",value:function(){var e=document.querySelector("#glcanvas").getContext("webgl");this.bgTexture=E(e,this.props.backgroundImage)}},{key:"updateSrcTexture",value:function(){var e=this.props.src;if(null!=e){var t=document.querySelector("#glcanvas").getContext("webgl");this.srcTexture=E(t,e,t.LINEAR)}else this.srcTexture=null}},{key:"renderGlScene",value:function(e,t){if(function(e){e.clearColor(0,0,0,0),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}(e),this.props.behindTemplate||b(e,this.programInfo,this.buffers,this.bgTexture,[1,1,1],[0,0,0],0,[1,1,1]),this.srcTexture){var r=this.props.xOffset,a=this.props.yOffset,n=this.props.scale,i=this.props.scale;this.props.srcAspectRatio<1?n*=this.props.srcAspectRatio:this.props.srcAspectRatio>1&&(i=1*i/this.props.srcAspectRatio);var o=this.props.mirrorLeft?-1:1,s=this.props.mirrorRight?-1:1,c=this.props.mirrorLeft?-this.props.rotation:this.props.rotation,l=this.props.mirrorRight?this.props.rotation:-this.props.rotation;this.props.twoImages&&b(e,this.programInfo,this.buffers,this.srcTexture,[n,i,1],[-r,a,0],c,[o,1,1]),b(e,this.programInfo,this.buffers,this.srcTexture,[n,i,1],[r,a,0],l,[s,1,1])}this.props.behindTemplate&&b(e,this.programInfo,this.buffers,this.bgTexture,[1,1,1],[0,0,0],0,[1,1,1]),this.rafHandle=p()(this.renderGlScene.bind(this,e,t))}},{key:"render",value:function(){return n.a.createElement("canvas",{id:"glcanvas",width:"160",height:"160"})}}]),t}(a.Component),v=r(3),S=r(25),R=r.n(S),A=(r(64),r(11)),_=r.n(A),O=r(12);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=[],L=[],k=function(e){function t(){var e,r;Object(c.a)(this,t);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(r=Object(u.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={src:null,backgroundImage:_.a,aspectRatio:1,eyesSettings:O,imageSourceType:"file"},r.onImageSourceAvailable=function(e){var t=new Image;t.crossOrigin="",t.src=e,t.onload=function(){r.setState({src:e,aspectRatio:t.width/t.height})}},r.builtinImageChosen=function(e){r.setState((function(t){return{backgroundImage:e.src,eyesSettings:F({},t.eyesSettings,{},L[e.value])}}))},r.onSelectImage=function(e){if("file"==r.state.imageSourceType){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){r.onImageSourceAvailable(t.result)}),!1),t.readAsDataURL(e.target.files[0])}}else r.onImageSourceAvailable("https://cors-anywhere.herokuapp.com/"+e.target.value)},r.onSelectBGFile=function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){var e=new Image;e.src=t.result,e.onload=function(){r.setState({backgroundImage:t.result})}}),!1),t.readAsDataURL(e.target.files[0])}},r}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=r(65),t=e.keys();I=t.map(e),t.forEach((function(e){try{var t=r(70)("./"+e.substring(2,e.lastIndexOf("."))+".json");L.push(t)}catch(a){L.push({})}}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"Top",style:{height:"100%",display:"flex",flexDirection:"column"}},n.a.createElement("div",{className:"App",style:{flexGrow:2}},n.a.createElement("div",null,"Emoji Workflow",n.a.createElement("br",null),n.a.createElement(T,{backgroundImage:this.state.backgroundImage,src:this.state.src,srcAspectRatio:this.state.aspectRatio,xOffset:this.state.eyesSettings.xOffset/100,yOffset:this.state.eyesSettings.yOffset/100,scale:this.state.eyesSettings.scaleFactor/100,rotation:this.state.eyesSettings.rotation*Math.PI/180,mirrorRight:this.state.eyesSettings.mirrorRight,mirrorLeft:this.state.eyesSettings.mirrorLeft,twoImages:this.state.eyesSettings.twoEyes,behindTemplate:this.state.eyesSettings.behindTemplate})),n.a.createElement("div",{className:"AppSmall"},n.a.createElement("ul",{style:{listStyleType:"none"}},n.a.createElement("li",null,this.state.eyesSettings.imageTitle,":"),n.a.createElement("li",null,n.a.createElement("img",{src:this.state.src,style:this.state.src?{height:100,border:"1px solid white"}:{height:100,width:100,border:"1px solid white"}})),n.a.createElement("li",null,n.a.createElement("input",{type:this.state.imageSourceType,onChange:this.onSelectImage})),n.a.createElement("div",null,n.a.createElement("button",{onClick:function(){e.setState({imageSourceType:"file"})}},"File"),"\xa0",n.a.createElement("button",{onClick:function(){e.setState({imageSourceType:"url"})}},"Url")))),n.a.createElement("div",{style:{padding:"50px"}},"X Offset: ",this.state.eyesSettings.xOffset,"%",n.a.createElement("br",null),n.a.createElement(v.a,{axis:"x",x:this.state.eyesSettings.xOffset,xmin:-100,xmax:100,onChange:function(t){var r=t.x;return e.setState((function(e){return{eyesSettings:F({},e.eyesSettings,{xOffset:r})}}))}}),n.a.createElement("br",null),"Y Offset: ",this.state.eyesSettings.yOffset,"%",n.a.createElement("br",null),n.a.createElement(v.a,{axis:"x",x:this.state.eyesSettings.yOffset,xmin:-100,xmax:100,onChange:function(t){var r=t.x;return e.setState((function(e){return{eyesSettings:F({},e.eyesSettings,{yOffset:r})}}))}}),n.a.createElement("br",null),"Scale: ",this.state.eyesSettings.scaleFactor,"%",n.a.createElement("br",null),n.a.createElement(v.a,{axis:"x",x:this.state.eyesSettings.scaleFactor,xmin:0,xmax:200,onChange:function(t){var r=t.x;return e.setState((function(e){return{eyesSettings:F({},e.eyesSettings,{scaleFactor:r})}}))}}),n.a.createElement("br",null),"Rotation:  ",this.state.eyesSettings.rotation,"\xb0",n.a.createElement("br",null),n.a.createElement(v.a,{axis:"x",x:this.state.eyesSettings.rotation,xmin:-90,xmax:90,onChange:function(t){var r=t.x;return e.setState((function(e){return{eyesSettings:F({},e.eyesSettings,{rotation:r})}}))}}),n.a.createElement("br",null),"Mirror Right: ",n.a.createElement("input",{type:"checkbox",checked:this.state.eyesSettings.mirrorRightEye,onChange:function(t){var r=t.target;e.setState((function(e){return{eyesSettings:F({},e.eyesSettings,{mirrorRightEye:r.checked})}}))}}),n.a.createElement("br",null),this.state.eyesSettings.twoEyes&&n.a.createElement("p",null,"Mirror Left: ",n.a.createElement("input",{type:"checkbox",checked:this.state.eyesSettings.mirrorLeftEye,onChange:function(t){var r=t.target;e.setState((function(e){return{eyesSettings:F({},e.eyesSettings,{mirrorLeftEye:r.checked})}}))}})))),n.a.createElement("div",{className:"App"},n.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},n.a.createElement("div",{className:"App",style:{paddingTop:30}},"Choose a background image:",n.a.createElement("br",null),n.a.createElement(R.a,{images:I.map((function(e,t){return{src:e,value:t}})),onPick:this.builtinImageChosen})),n.a.createElement("div",{className:"AppSmall"},"Or choose a custom image:\xa0\xa0",n.a.createElement("input",{type:"file",onChange:this.onSelectBGFile,style:{alignSelf:"top"}})))),n.a.createElement("div",{className:"Footer",style:{height:40}}))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.6455be8b.chunk.js.map